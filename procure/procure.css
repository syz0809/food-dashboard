:root{ --primary:#e53935; --ink:#222; --muted:#777; --bg:#fafafa; --card:#fff; --bd:#f0f0f0; --shadow:0 10px 28px rgba(0,0,0,.06); }
body{background:var(--bg);color:var(--ink)}
.container{max-width:1180px;margin:0 auto;padding:0 14px}
.title{margin:0 0 8px;font-weight:900}
.card{background:var(--card);border:1px solid #f4f4f4;border-radius:16px;box-shadow:var(--shadow);padding:14px}
.btn{border:1px solid #eee;background:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
.btn-primary{background:var(--primary);color:#fff;border-color:transparent;box-shadow:0 6px 14px rgba(229,57,53,.25)}
.btn-inline{background:#fff}
.muted{color:var(--muted)}

/* 主布局 */
.main--procure{ display:grid; grid-template-columns: 1.1fr 1.6fr 1.2fr; gap: 22px; margin-top: 14px; }
.left-col{align-self:start}
.mid-col{align-self:start}
.right-col{align-self:start;margin-top:6px}
.section-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}

/* 过滤器 */
.filter-group{ margin-bottom: 14px; }
.filter-group .label{ font-weight:800; margin-bottom:6px; }
.pill-bar{ display:flex; flex-wrap:wrap; gap:8px }
.pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#fff; border:1px solid #ffd6cc; cursor:pointer; font-weight:700; color:#a33; transition:all .15s ease; }
.pill:hover{ border-color:#ff8a65; background:#fffdf9; }
.pill.on{ background:var(--primary); color:#fff; border-color:transparent; box-shadow:0 6px 14px rgba(229,57,53,.18); }
.seg{display:flex;gap:8px}
.seg button.on{background:#222;color:#fff}

/* 物料列表 */
.mat-list{ display:grid; gap:10px; max-height:560px; overflow:auto; padding-right:6px; }
.mat{ border:1px solid var(--bd); border-radius:14px; padding:10px; background:#fff; display:grid; grid-template-columns: 1fr auto auto; gap:8px; align-items:center; }
.mat .name{ font-weight:800 }
.mat .meta{ color:#777; font-size:12px }
.mat .stock{ font-weight:900; justify-self:end }
.mat .btns{ display:flex; gap:8px }
.badge{display:inline-flex;align-items:center;font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid #eee;margin-left:6px}
.badge.low{background:#fff6f2;color:#c33;border-color:#ffd6cc}
.badge.mid{background:#fffef2;color:#b58500;border-color:#ffe6a3}
.badge.high{background:#f2fff6;color:#0a8a3d;border-color:#c8f0d8}

/* KPI */
.kpis{ display:grid; gap:12px; margin-top:10px }
.kpis-3{ grid-template-columns: repeat(3,1fr); }
.kpi{ background:#fff;border:1px solid #f4f4f4;border-radius:14px;padding:12px }
.kpi .label{ color:#666; font-size:12px }
.kpi-num{ font-weight:900; font-size:22px }

/* PO 列表 */
.po-head, .po-row{ display:grid; grid-template-columns: 1.2fr 1.2fr .8fr .9fr .9fr 1.1fr 1fr .8fr; gap:10px; padding:10px; border-bottom:1px solid #f4f4f4; align-items:center; }
.po-head{ color:#888; font-size:12px }
.po-row .qty input{ width:90px; padding:6px 8px; border:1px solid #eee; border-radius:8px; }
.po-row .rm{ background:#fff3f3; color:#b22; }
.po-foot{display:flex;justify-content:space-between;align-items:center;padding:10px;color:#555}

/* 弹窗 */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:9 }
.modal.hide{ display:none }
.dialog{ width:min(960px,92vw); background:#fff; border-radius:16px; box-shadow:var(--shadow); overflow:hidden }
.dialog__hd{ display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid #f2f2f2 }
.dialog__bd{ padding:16px; display:grid; gap:12px }
.dialog__ft{ padding:12px 16px; display:flex; gap:10px; justify-content:flex-end; border-top:1px solid #f2f2f2 }
.x{ border:none; background:#fff; border-radius:8px; padding:6px; cursor:pointer }
.md-grid{ display:grid; grid-template-columns: 1.1fr 1.5fr; gap:16px }
.md-col{ display:grid; gap:10px }
.md-row{ display:grid; gap:6px }
.md-val{ font-weight:800 }
.sug{ margin:0; padding-left:18px }

/* Toast */
.toast{ position:fixed;right:16px;bottom:16px;background:#222;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;transform:translateY(8px);transition:all .2s ease;pointer-events:none }
.toast.show{opacity:1;transform:translateY(0)}

/* 迷你图表 */
.miniChart{width:100%;display:block}

@media (max-width: 980px){
  .main--procure{grid-template-columns:1fr}
}

.stock-info {
  display: grid;
  grid-auto-flow: column;
  column-gap: 16px; /* 设置列间距 */
  align-items: center;
}

.item-title {
  white-space: nowrap;     /* 不允许换行 */
  display: inline-block;   /* 避免被强制撑满 */
  overflow: hidden;        /* 如果溢出，可以配合省略号 */
  text-overflow: ellipsis; 
}

/* ==== 文字与间距系统（覆盖增强） ==== */
:root{
  --fz-12: 12px;
  --fz-14: 14px;
  --fz-16: 16px;
  --fz-18: 18px;
  --lh-tight: 1.15;
  --lh-base: 1.4;
  --gap-4: 4px;
  --gap-6: 6px;
  --gap-8: 8px;
  --gap-10: 10px;
  --gap-12: 12px;
  --gap-14: 14px;
}

body { line-height: var(--lh-base); }

/* 顶部筛选 - 让按钮不拥挤 */
.seg button{ padding:8px 12px; font-size: var(--fz-14); }
.pill{ font-weight: 600; padding:8px 12px; }  /* 略降字重更耐看 */

/* ==== 物料卡片全新栅格 ==== */
.mat{
  display: grid;
  grid-template-columns: 1.3fr 1fr auto; /* 左：标题  中：数据  右：操作 */
  gap: var(--gap-12);
  align-items: center;
  padding: 12px 14px;
  border-radius: 14px;
}

/* 左列：标题与副标题 */
.mat__left{ min-width: 0; } /* 允许省略号 */
.mat__title{
  font-weight: 800;
  font-size: var(--fz-16);
  line-height: var(--lh-tight);
  white-space: nowrap;         /* 单行显示 */
  overflow: hidden;
  text-overflow: ellipsis;     /* 超出省略 */
  display: flex; align-items: center; gap: var(--gap-8);
}
.mat__meta{
  margin-top: var(--gap-6);
  color:#777; font-size: var(--fz-12);
}

/* 中列：数据（两行） */
.mat__stats{ display: grid; gap: var(--gap-6); }
.stock-line{
  display:flex; align-items:center; gap: var(--gap-10);
  font-size: var(--fz-16); font-weight: 700;
}
.stock-line .slash{ color:#999; font-weight: 400; }
.lead-line{ color:#555; font-size: var(--fz-14); }

/* 右列：操作按钮竖排且不挤 */
.mat__actions{ display:flex; flex-direction: column; gap: var(--gap-8); }
.mat__actions .btn{ padding:8px 12px; }

/* 安全徽章更紧凑，视觉不抢 */
.badge{
  font-size: var(--fz-12);
  line-height: 1;
  padding: 4px 8px;
  border-radius: 999px;
}

/* 小型设备下改为两行：按钮换到第二行右侧 */
@media (max-width: 680px){
  .mat{
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "left actions"
      "stats actions";
    align-items: start;
  }
  .mat__left{ grid-area: left; }
  .mat__stats{ grid-area: stats; }
  .mat__actions{ grid-area: actions; }
}

/* 让徽章换到标题下一行且不被裁切 */
.mat { overflow: visible; padding-left: 16px; } /* 往里缩一点，避免左侧裁切 */
.mat__title{
  display: flex;
  flex-wrap: wrap;          /* 允许换行 */
  align-items: baseline;
  column-gap: 8px;
  row-gap: 6px;
}
.mat__title .badge{
  order: 2;                 /* 第二行 */
  flex-basis: 100%;         /* 独占一行 */
  margin: 0;                /* 清理之前的 margin */
}
